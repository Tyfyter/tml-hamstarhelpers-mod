<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mod Helpers: NetSerializer - A fast, simple serializer for .Net</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mod Helpers
   &#160;<span id="projectnumber">v5.9.1</span>
   </div>
   <div id="projectbrief">A centralized collection of library code, helpful services, and end-user functions for mod management and information.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__project__hamstar_helpers_lib__doc.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NetSerializer - A fast, simple serializer for .Net </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Supported Types</h2>
<p>NetSerializer supports serializing the following types:</p>
<ul>
<li>All primitive types (Boolean, Byte, SByte, Int16, UInt16, Int32, UInt32, Int64, UInt64, IntPtr, UIntPtr, Char, Double, and Single)</li>
<li>Strings</li>
<li>Enums</li>
<li>Single dimensional arrays</li>
<li>Structs and classes marked with <code>Serializable</code> Attribute. Note, however, that classes implementing <code>ISerializable</code> are <em>not</em> supported, except for the cases below.</li>
<li>Dictionary&lt;K,V&gt;</li>
<li>DateTime</li>
<li>Types with user defined <a href="#custom-serializers">custom serializers</a></li>
</ul>
<h2>Caveats</h2>
<ul>
<li><code>ISerializable</code> is not supported, so not all classes marked with <code>[Serializable]</code> are supported.</li>
<li>Versioning not supported. Any change in the types may result in incompatible data.</li>
<li>The above also implies that if client-server architecture is used, both client and server must have the exact same types.</li>
<li>With client-server, both client and server must set up the NetSerializer in the same way, providing the same types (and type IDs).</li>
</ul>
<h2>Usage</h2>
<p>The types to be serialized need to be marked with the standard <code>[Serializable]</code>. You can also use <code>[NonSerialized]</code> for fields you don't want to serialize. Nothing else needs to be done for the types to be serialized.</p>
<p>Then you need to initialize NetSerializer by giving it a list of types you will be serializing. NetSerializer will scan through the given types, and recursively add all the types used by the given types, and assign type IDs and create (de)serialization code.</p>
<p>All the types you will be serializing should be reachable from this list of types. If your types contain fields of base class types or interfaces, NetSerializer does not know what concrete types you will be serializing via those fields. You need to collect those types somehow and provide them to NetSerializer when initializing (See <a href="#collecting-types">Collecting Types</a>).</p>
<p>It is important that the list of types provided to NetSerializer contains exactly the same types on all NetSerializer instances (e.g. client and server), as the type IDs are assigned according to the list.</p>
<p>There is also a possibility to add types later via <a href="#type-maps">type maps</a>, which is somewhat complex and only recommended if absolutely needed.</p>
<h2>Example</h2>
<p>Initialization:</p>
<div class="fragment"><div class="line">var types = YourCollectTypesMethod();</div><div class="line">var ser = new Serializer(types);</div></div><!-- fragment --><p>Serializing:</p>
<p><code>ser.Serialize(stream, ob);</code></p>
<p>Deserializing:</p>
<p><code>var ob = (YourType)ser.Deserialize(stream);</code></p>
<h2>Collecting Types</h2>
<p>There are many ways to collect the types for NetSerializer. Here is one example.</p>
<p>Let's say we have a bunch of message types we want to serialize. All those message types inherit <code>MessageBase</code>.</p>
<p>With this helper:</p>
<div class="fragment"><div class="line">IEnumerable&lt;Type&gt; GetSubclasses(Type type)</div><div class="line">{</div><div class="line">    return type.Assembly.GetTypes().Where(t =&gt; t.IsSubclassOf(type));</div><div class="line">}</div></div><!-- fragment --><p>we can use the following code to collect all the message types:</p>
<div class="fragment"><div class="line">var messageTypes = GetSubclasses(typeof(MessageBase));</div><div class="line">var ser = new Serializer(messageTypes);</div></div><!-- fragment --><h2>Direct Serialization</h2>
<p>NetSerializer supports so called direct serialization via the following methods:</p>
<div class="fragment"><div class="line">SerializeDirect&lt;T&gt;()</div><div class="line">DeserializeDirect&lt;T&gt;()</div></div><!-- fragment --><p>These methods can be used when the serializer <em>and</em> the deserializer know the exact type of the object. This has two benefits:</p>
<ul>
<li>No type ID will be written, saving a byte of two</li>
<li>Value types are not boxed, reducing the amount of garbage generated</li>
</ul>
<p>It is quite rare to need direct serialization, but if you need to serialize lots of value types, direct serialization is faster than normal serialization.</p>
<h2>Type Maps</h2>
<p>When NetSerializer serializes data, it uses a number (type ID) to represent the type in question, so that the deserializer knows what type to instantiate. Normally these type IDs are automatically reserved when initializing NetSerializer, and NetSerializer stores these type IDs in a type map (Type -&gt; TypeID map).</p>
<p>For advanced use cases it is also possible for the user to manually assign type IDs for types in a type map. This type map can be provided to NetSerializer when initializing NetSerializer, or later with <code>AddTypes(Dictionary&lt;Type, uint&gt; typeMap)</code>.</p>
<p>It is critical to keep in mind that the exact same type map must be (somehow) provided to all instances of NetSerializer (e.g. client and server). How this is communicated between the different instances depends on the use case and is out of scope of this document.</p>
<p>Alternatively types can be added at runtime with <code>AddTypes(IEnumerable&lt;Type&gt; rootTypes)</code>, which assigns type IDs automatically and returns a type map of the added types, which must then be delivered to other instances.</p>
<h2>Settings</h2>
<p>You can provide <code>NetSerializer.Settings</code> instance when initializing netserializer to enable support for <code>IDeserializationCallback</code> or <code>OnSerializing</code>, <code>OnSerialized</code>, <code>OnDeserializing</code>, <code>OnDeserialized</code> attributes.</p>
<h2>Custom Serializers</h2>
<p>NetSerializer also supports creating custom serializers. Custom serializers can be used to serialize types not directly supported by NetSerializer.</p>
<p>However, at the moment custom serializers are somewhat limited in functionality, and you may not be able to create efficient custom serializers. Issue #39 tracks this.</p>
<h2>Known Issues</h2>
<ul>
<li>Mono issue with CultureInfo: <a href="https://github.com/tomba/netserializer/pull/38">Issue #38</a>, <a href="https://github.com/mono/mono/pull/2942">Mono pull req</a></li>
<li>String serialization on CentOS 6: <a href="https://github.com/tomba/netserializer/pull/55">Issue #55</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
